<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style: ;
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style: ;
        }

        /* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb;
        }

        ::after,
        ::before {
            --tw-content: '';
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            line-height: inherit;
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px;
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit;
        }

        a {
            color: inherit;
            text-decoration: inherit;
        }

        b,
        strong {
            font-weight: bolder;
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em;
        }

        small {
            font-size: 80%;
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
        }

        sub {
            bottom: -.25em;
        }

        sup {
            top: -.5em;
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse;
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0;
        }

        button,
        select {
            text-transform: none;
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none;
        }

        :-moz-focusring {
            outline: auto;
        }

        :-moz-ui-invalid {
            box-shadow: none;
        }

        progress {
            vertical-align: baseline;
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto;
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px;
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none;
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit;
        }

        summary {
            display: list-item;
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0;
        }

        fieldset {
            margin: 0;
            padding: 0;
        }

        legend {
            padding: 0;
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        dialog {
            padding: 0;
        }

        textarea {
            resize: vertical;
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af;
        }

        [role=button],
        button {
            cursor: pointer;
        }

        :disabled {
            cursor: default;
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle;
        }

        img,
        video {
            max-width: 100%;
            height: auto;
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none;
        }

        .container {
            width: 100%;
        }

        @media (min-width: 640px) {
            .container {
                max-width: 640px;
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 768px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
            }
        }

        @media (min-width: 1280px) {
            .container {
                max-width: 1280px;
            }
        }

        @media (min-width: 1536px) {
            .container {
                max-width: 1536px;
            }
        }

        .fixed {
            position: fixed;
        }

        .absolute {
            position: absolute;
        }

        .relative {
            position: relative;
        }

        .sticky {
            position: sticky;
        }

        .inset-0 {
            inset: 0px;
        }

        .bottom-4 {
            bottom: 1rem;
        }

        .left-16 {
            left: 4rem;
        }

        .left-4 {
            left: 1rem;
        }

        .top-0 {
            top: 0px;
        }

        .top-4 {
            top: 1rem;
        }

        .z-30 {
            z-index: 30;
        }

        .z-50 {
            z-index: 50;
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }

        .mb-1 {
            margin-bottom: 0.25rem;
        }

        .mb-2 {
            margin-bottom: 0.5rem;
        }

        .mb-3 {
            margin-bottom: 0.75rem;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .mb-6 {
            margin-bottom: 1.5rem;
        }

        .mt-6 {
            margin-top: 1.5rem;
        }

        .mt-4 {
            margin-top: 1rem;
        }

        .block {
            display: block;
        }

        .flex {
            display: flex;
        }

        .grid {
            display: grid;
        }

        .hidden {
            display: none;
        }

        .h-10 {
            height: 2.5rem;
        }

        .h-2 {
            height: 0.5rem;
        }

        .h-5 {
            height: 1.25rem;
        }

        .h-6 {
            height: 1.5rem;
        }

        .h-8 {
            height: 2rem;
        }

        .h-screen {
            height: 100vh;
        }

        .max-h-\[90vh\] {
            max-height: 90vh;
        }

        .w-10 {
            width: 2.5rem;
        }

        .w-5 {
            width: 1.25rem;
        }

        .w-6 {
            width: 1.5rem;
        }

        .w-8 {
            width: 2rem;
        }

        .w-full {
            width: 100%;
        }

        .max-w-lg {
            max-width: 32rem;
        }

        .max-w-md {
            max-width: 28rem;
        }

        .flex-1 {
            flex: 1 1 0%;
        }

        .cursor-pointer {
            cursor: pointer;
        }

        .list-inside {
            list-style-position: inside;
        }

        .list-disc {
            list-style-type: disc;
        }

        .appearance-none {
            -webkit-appearance: none;
            appearance: none;
        }

        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: 0.5rem;
        }

        .gap-3 {
            gap: 0.75rem;
        }

        .gap-4 {
            gap: 1rem;
        }

        .space-y-1> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.25rem * var(--tw-space-y-reverse));
        }

        .space-y-4> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1rem * var(--tw-space-y-reverse));
        }

        .overflow-hidden {
            overflow: hidden;
        }

        .overflow-y-auto {
            overflow-y: auto;
        }

        .rounded-full {
            border-radius: 9999px;
        }

        .rounded-lg {
            border-radius: 0.5rem;
        }

        .rounded-xl {
            border-radius: 0.75rem;
        }

        .bg-black {
            --tw-bg-opacity: 1;
            background-color: rgb(0 0 0 / var(--tw-bg-opacity, 1));
        }

        .bg-blue-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(219 234 254 / var(--tw-bg-opacity, 1));
        }

        .bg-blue-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1));
        }

        .bg-blue-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(59 130 246 / var(--tw-bg-opacity, 1));
        }

        .bg-blue-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1));
        }

        .bg-gray-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1));
        }

        .bg-green-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(220 252 231 / var(--tw-bg-opacity, 1));
        }

        .bg-green-200 {
            --tw-bg-opacity: 1;
            background-color: rgb(187 247 208 / var(--tw-bg-opacity, 1));
        }

        .bg-green-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(240 253 244 / var(--tw-bg-opacity, 1));
        }

        .bg-green-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1));
        }

        .bg-green-700 {
            --tw-bg-opacity: 1;
            background-color: rgb(21 128 61 / var(--tw-bg-opacity, 1));
        }

        .bg-green-800 {
            --tw-bg-opacity: 1;
            background-color: rgb(22 101 52 / var(--tw-bg-opacity, 1));
        }

        .bg-purple-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(243 232 255 / var(--tw-bg-opacity, 1));
        }

        .bg-purple-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(147 51 234 / var(--tw-bg-opacity, 1));
        }

        .bg-red-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(220 38 38 / var(--tw-bg-opacity, 1));
        }

        .bg-white {
            --tw-bg-opacity: 1;
            background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));
        }

        .bg-yellow-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(234 179 8 / var(--tw-bg-opacity, 1));
        }

        .bg-opacity-50 {
            --tw-bg-opacity: 0.5;
        }

        .bg-opacity-90 {
            --tw-bg-opacity: 0.9;
        }

        .p-4 {
            padding: 1rem;
        }

        .p-6 {
            padding: 1.5rem;
        }

        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .px-6 {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }

        .text-center {
            text-align: center;
        }

        .font-sans {
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem;
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem;
        }

        .text-4xl {
            font-size: 2.25rem;
            line-height: 2.5rem;
        }

        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem;
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem;
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem;
        }

        .font-bold {
            font-weight: 700;
        }

        .font-medium {
            font-weight: 500;
        }

        .font-semibold {
            font-weight: 600;
        }

        .text-blue-700 {
            --tw-text-opacity: 1;
            color: rgb(29 78 216 / var(--tw-text-opacity, 1));
        }

        .text-blue-800 {
            --tw-text-opacity: 1;
            color: rgb(30 64 175 / var(--tw-text-opacity, 1));
        }

        .text-gray-500 {
            --tw-text-opacity: 1;
            color: rgb(107 114 128 / var(--tw-text-opacity, 1));
        }

        .text-gray-600 {
            --tw-text-opacity: 1;
            color: rgb(75 85 99 / var(--tw-text-opacity, 1));
        }

        .text-gray-700 {
            --tw-text-opacity: 1;
            color: rgb(55 65 81 / var(--tw-text-opacity, 1));
        }

        .text-green-600 {
            --tw-text-opacity: 1;
            color: rgb(22 163 74 / var(--tw-text-opacity, 1));
        }

        .text-green-700 {
            --tw-text-opacity: 1;
            color: rgb(21 128 61 / var(--tw-text-opacity, 1));
        }

        .text-green-800 {
            --tw-text-opacity: 1;
            color: rgb(22 101 52 / var(--tw-text-opacity, 1));
        }

        .text-purple-800 {
            --tw-text-opacity: 1;
            color: rgb(107 33 168 / var(--tw-text-opacity, 1));
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1));
        }

        .shadow-lg {
            --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }

        .shadow-md {
            --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }

        .shadow-xl {
            --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
        }

        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }

        .transition-colors {
            transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }

        .hover\:bg-blue-200:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(191 219 254 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-blue-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-blue-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(29 78 216 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-green-200:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(187 247 208 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-green-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(21 128 61 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-green-800:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(22 101 52 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-purple-200:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(233 213 255 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-purple-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(126 34 206 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-red-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(185 28 28 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-yellow-600:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(202 138 4 / var(--tw-bg-opacity, 1));
        }

        .hover\:bg-opacity-100:hover {
            --tw-bg-opacity: 1;
        }

        .hover\:text-gray-700:hover {
            --tw-text-opacity: 1;
            color: rgb(55 65 81 / var(--tw-text-opacity, 1));
        }

        .hover\:text-green-200:hover {
            --tw-text-opacity: 1;
            color: rgb(187 247 208 / var(--tw-text-opacity, 1));
        }

        @media (min-width: 768px) {
            .md\:hidden {
                display: none;
            }

            .md\:w-80 {
                width: 20rem;
            }

            .md\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .md\:flex-row {
                flex-direction: row;
            }

            .md\:text-5xl {
                font-size: 3rem;
                line-height: 1;
            }

            .md\:text-xl {
                font-size: 1.25rem;
                line-height: 1.75rem;
            }
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wildlife Reserve Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: "Poppins", sans-serif !important;
        }

        @keyframes rainFall {
            to {
                transform: translateY(100vh) translateX(var(--rain-x, 50px));
            }
        }

        .creature {
            position: absolute;
            transition: all 0.3s ease-out;
            cursor: pointer;
            z-index: 20;
            image-rendering: crisp-edges;
        }

        .plant {
            position: absolute;
            cursor: pointer;
            z-index: 10;
            image-rendering: crisp-edges;
        }

        .rain-drop {
            position: absolute;
            width: 2px;
            height: 15px;
            background: #00aeff;
            opacity: 0.6;
            animation: rainFall linear forwards;
            z-index: 5;
        }

        .sun {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #ffd700;
            border-radius: 50%;
            box-shadow: 0 0 30px #ffd700;
            transition: all 0.5s;
            z-index: 1;
        }

        .terrain-grass {
            background: linear-gradient(135deg, #00de94, #00ff52);
        }

        .terrain-desert {
            background: linear-gradient(135deg, #ffd700, #ffa500);
        }

        .terrain-forest {
            background: linear-gradient(135deg, #228b22, #006400);
        }

        .terrain-water {
            background: linear-gradient(135deg, #00aeff, #00ffff);
        }

        .animal-icon {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        .plant-icon {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        /* Subtle background animation for landing page */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .landing-bg {
            background: linear-gradient(135deg, #00de94, #006400, #00aeff);
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
        }
    </style>


    <!-- Navbar -->
    <nav class="bg-green-800 text-white p-4 sticky top-0 z-50 shadow-md">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                <span class="text-xl font-semibold">Wildlife Reserve Simulator</span>
            </div>
            <div id="nav-items" class="flex items-center gap-4">
                <!-- Home icon, shown only in content view -->
                <a id="home-link" href="#" class="hover:text-green-200 transition-colors" onclick="showView('landing')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-house-icon lucide-house">
                        <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path>
                        <path
                            d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z">
                        </path>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <!-- Landing Page -->
    <div id="landing-view" class="landing-bg h-screen flex items-center justify-center hidden">
        <div class="text-center text-white p-6 max-w-lg mx-auto">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">
                Welcome to Wildlife Reserve Simulator
            </h1>
            <p class="text-lg md:text-xl mb-6">
                Explore a dynamic ecosystem where you can manage terrains, creatures,
                and plants. Simulate nature's balance with interactive controls and
                watch your reserve thrive!
            </p>
            <button onclick="showView('content')"
                class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                Start Exploring
            </button>
        </div>
    </div>
    <!-- Main Content -->
    <div id="content-view" class="flex flex-col md:flex-row h-screen gap-4 p-4">
        <!-- Control Panel -->
        <div class="bg-white rounded-xl shadow-lg p-6 w-full md:w-80 overflow-y-auto">
            <button id="panelToggle"
                class="md:hidden w-full py-2 mb-2 flex items-center justify-center bg-green-100 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                        clip-rule="evenodd"></path>
                </svg>
            </button>
            <h2 class="text-2xl font-bold text-green-800 mb-6 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                    </path>
                </svg>
                Reserve Controls
            </h2>

            <!-- Animals Section -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold text-green-700 mb-3 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-paw-print-icon lucide-paw-print">
                        <circle cx="11" cy="4" r="2" />
                        <circle cx="18" cy="8" r="2" />
                        <circle cx="20" cy="16" r="2" />
                        <path
                            d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z" />
                    </svg>
                    Wildlife
                </h3>
                <div class="grid grid-cols-2 gap-2">
                    <button
                        class="creature-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all selected"
                        data-type="rabbit" onclick="openAnimalModal('rabbit')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="animal-icon lucide-rabbit">
                            <path d="M13 16a3 3 0 0 1 2.24 5"></path>
                            <path d="M18 12h.01"></path>
                            <path
                                d="M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3">
                            </path>
                            <path d="M20 8.54V4a2 2 0 1 0-4 0v3"></path>
                            <path d="M7.612 12.524a3 3 0 1 0-1.6 4.3"></path>
                        </svg>
                        Rabbit
                    </button>
                    <button
                        class="creature-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all"
                        data-type="bird" onclick="openAnimalModal('bird')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="animal-icon lucide-bird">
                            <path d="M16 7h.01"></path>
                            <path d="M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20"></path>
                            <path d="m20 7 2 .5-2 .5"></path>
                            <path d="M10 18v3"></path>
                            <path d="M14 17.75V21"></path>
                            <path d="M7 18a6 6 0 0 0 3.84-10.61"></path>
                        </svg>
                        Bird
                    </button>
                    <button
                        class="creature-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all"
                        data-type="deer" onclick="openAnimalModal('deer')">
                        <svg width="48px" height="48px" viewBox="0 0 400 400" fill="none" stroke="currentColor"
                            stroke-width="2" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M103.157 228.16C97.1175 206.603 77.6664 197.936 88.6369 175.668C97.1175 158.454 216.768 173.72 223.31 167.358C227.108 163.666 253.471 121.867 258.205 119.564C262.157 117.642 275.672 120.91 294.804 125.866C299.384 127.052 319.504 129.075 323.313 132.708C328.048 137.225 321.653 161.99 319.828 163.949C317.256 166.71 284.523 158.038 279.579 161.059C271.931 165.731 249.143 243.322 246.413 245.711C236.031 254.794 137.578 245.883 121.106 243.322"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path
                                d="M119.324 245.155C111.82 253.018 97.8435 278.228 97.8435 282.955C97.8435 289.231 95.8876 318.675 108.246 329.255"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path d="M135.233 251.974C130.443 265.952 127.324 281.559 121.596 294.024"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path d="M121.596 297.433C127.911 310.597 128.475 326.336 142.052 330.391"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path d="M224.173 253.11C221.814 278.703 222.559 305.39 222.559 330.391"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path d="M247.051 249.701C249.824 271.765 240.895 315.752 248.882 329.255"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path d="M195.467 75.8188C214.423 101.322 304.859 98.2276 314.977 98.2276"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path
                                d="M284.527 69.3765C283.651 74.4106 282.19 79.2537 281.039 84.2196C280.985 84.4563 276.047 97.6607 276.16 97.7654C276.8 98.3572 290.341 87.3921 291.497 86.8004C292.382 86.3407 307.167 79.6679 306.838 79.0579"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path
                                d="M253.428 75.1348C245.401 105.485 235.172 68.9216 234.936 69.0001C224.336 72.4118 228.894 94.9351 219.334 69.559"
                                stroke="currentColor" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                            <path d="M86.3648 176.966C83.4788 182.407 78.9329 187.315 75 191.74" stroke="currentColor"
                                stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round">
                            </path>
                        </svg>
                        Deer
                    </button>
                    <button
                        class="creature-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all"
                        data-type="fox" onclick="openAnimalModal('fox')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="animal-icon lucide-cat">
                            <path
                                d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z">
                            </path>
                            <path d="M8 14v.5"></path>
                            <path d="M16 14v.5"></path>
                            <path d="M11.25 16.25h1.5L12 17l-.75-.75Z"></path>
                        </svg>
                        Fox
                    </button>
                </div>
            </div>

            <!-- Plants Section -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold text-green-700 mb-3 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-sprout-icon lucide-sprout">
                        <path d="M7 20h10" />
                        <path d="M10 20c5.5-2.5.8-6.4 3-10" />
                        <path
                            d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z" />
                        <path d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z" />
                    </svg>
                    Vegetation
                </h3>
                <div class="grid grid-cols-2 gap-2">

                    <button
                        class="plant-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all"
                        data-type="tree" onclick="openPlantModal('tree')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="plant-icon lucide-tree-pine">
                            <path
                                d="m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z">
                            </path>
                            <path d="M12 22v-3"></path>
                        </svg>
                        Tree
                    </button>

                    <button
                        class="plant-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all"
                        data-type="bush" onclick="openPlantModal('bush')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="plant-icon lucide lucide-shrub-icon lucide-shrub">
                            <path d="M12 22v-7l-2-2" />
                            <path d="M17 8v.8A6 6 0 0 1 13.8 20H10A6.5 6.5 0 0 1 7 8a5 5 0 0 1 10 0Z" />
                            <path d="m14 14-2 2" />
                        </svg>
                        Bush
                    </button>

                    <button
                        class="plant-btn bg-green-100 hover:bg-green-200 text-green-800 py-2 px-3 rounded-lg flex flex-col items-center transition-all"
                        data-type="grass" onclick="openPlantModal('grass')">
                        <svg fill="none" stroke="currentColor" stroke-width="2" version="1.1" id="Capa_1"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px"
                            height="48px" viewBox="0 0 46.132 46.132" xml:space="preserve">
                            <g>
                                <g>
                                    <path
                                        d="M41.018,0.365c-0.238-0.342-0.688-0.461-1.064-0.282C35.202,2.349,28.245,7.011,23,16.148
                c3.04,4.616,5.675,10.559,7.057,18.125c0.181-7.561,1.681-23.859,10.856-32.812C41.212,1.171,41.255,0.707,41.018,0.365z">
                                    </path>
                                    <path d="M9.673,6.905C9.531,6.811,9.369,6.766,9.207,6.766c-0.231,0-0.461,0.094-0.628,0.275c-0.282,0.307-0.3,0.773-0.044,1.101
                c9.251,11.848,6.688,32.297,5.946,37.004c-0.039,0.247,0.031,0.498,0.193,0.688c0.162,0.188,0.399,0.299,0.648,0.299h11.908
                c0.229,0,0.446-0.091,0.606-0.253s0.249-0.381,0.246-0.609C27.806,22.242,16.498,11.376,9.673,6.905z">
                                    </path>
                                    <path d="M2.464,27.554c-0.165-0.108-0.385-0.081-0.519,0.064c-0.134,0.146-0.143,0.366-0.021,0.522
                c4.387,5.617,3.172,15.312,2.819,17.543C4.724,45.801,4.759,45.909,4.834,46c0.077,0.09,0.19,0.132,0.308,0.132h5.645
                c0.107,0,0.211-0.034,0.287-0.11s0.118-0.176,0.117-0.284C11.061,34.82,5.701,29.674,2.464,27.554z">
                                    </path>
                                    <path
                                        d="M44.146,20.59c-0.186-0.201-0.486-0.239-0.716-0.089c-4.463,2.923-11.854,10.028-12.036,25.087
                c-0.003,0.147,0.059,0.281,0.161,0.388c0.105,0.106,0.246,0.156,0.397,0.156h7.785c0.164,0,0.317-0.062,0.424-0.187
                c0.104-0.124,0.15-0.282,0.126-0.443c-0.485-3.078-2.161-16.447,3.889-24.195C44.344,21.093,44.331,20.791,44.146,20.59z">
                                    </path>
                                </g>
                            </g>
                        </svg>
                        Grass
                    </button>
                </div>
            </div>

            <!-- Weather Controls -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold text-green-700 mb-3 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-sun-icon lucide-sun">
                        <circle cx="12" cy="12" r="4" />
                        <path d="M12 2v2" />
                        <path d="M12 20v2" />
                        <path d="m4.93 4.93 1.41 1.41" />
                        <path d="m17.66 17.66 1.41 1.41" />
                        <path d="M2 12h2" />
                        <path d="M20 12h2" />
                        <path d="m6.34 17.66-1.41 1.41" />
                        <path d="m19.07 4.93-1.41 1.41" />
                    </svg>
                    Weather
                </h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Rainfall: <span
                                id="rain-value">0</span>%</label>
                        <input type="range" id="rain-slider" min="0" max="100" value="0"
                            class="w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Temperature: <span
                                id="temp-value">20</span>&deg;C</label>
                        <input type="range" id="temp-slider" min="-10" max="40" value="20"
                            class="w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div class="flex gap-2">
                        <button onclick="openWeatherModal()"
                            class="flex-1 bg-blue-100 hover:bg-blue-200 text-blue-800 py-2 px-4 rounded-lg transition-all text-sm font-medium">
                            Details
                        </button>
                        <button onclick="setRandomWeather()"
                            class="flex-1 bg-purple-100 hover:bg-purple-200 text-purple-800 py-2 px-4 rounded-lg transition-all text-sm font-medium">
                            Random
                        </button>
                    </div>
                </div>
            </div>

            <!-- Vegetation Density -->
            <div class="mb-6">
                <h3 class="text-lg font-semibold text-green-700 mb-3 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-trees-icon lucide-trees">
                        <path d="M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z" />
                        <path d="M7 16v6" />
                        <path d="M13 19v3" />
                        <path
                            d="M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5" />
                    </svg>
                    Vegetation Density
                </h3>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Density: <span
                            id="vegetation-value">50</span>%</label>
                    <input type="range" id="vegetation-slider" min="0" max="100" value="50"
                        class="w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer">
                </div>
            </div>

            <!-- Terrain Selection -->
            <div>
                <h3 class="text-lg font-semibold text-green-700 mb-3 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-mountain-snow-icon lucide-mountain-snow">
                        <path d="m8 3 4 8 5-5 5 15H2L8 3z" />
                        <path d="M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19" />
                    </svg>
                    Terrain
                </h3>
                <div class="grid grid-cols-2 gap-2">
                    <button
                        class="terrain-btn bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded-lg transition-all"
                        data-terrain="grass" onclick="openTerrainModal('grass')">
                        Grassland
                    </button>
                    <button
                        class="terrain-btn bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-3 rounded-lg transition-all"
                        data-terrain="desert" onclick="openTerrainModal('desert')">
                        Desert
                    </button>
                    <button
                        class="terrain-btn bg-green-700 hover:bg-green-800 text-white py-2 px-3 rounded-lg transition-all"
                        data-terrain="forest" onclick="openTerrainModal('forest')">
                        Forest
                    </button>
                    <button
                        class="terrain-btn bg-blue-500 hover:bg-blue-600 text-white py-2 px-3 rounded-lg transition-all active"
                        data-terrain="water" onclick="openTerrainModal('water')">
                        Wetland
                    </button>
                </div>
            </div>
        </div>

        <!-- Ecosystem View -->
        <div class="ecosystem-view terrain-water rounded-xl shadow-lg flex-1 relative overflow-hidden" id="ecosystem">
            <!-- Help Button -->
            <button onclick="openHelpModal()"
                class="absolute top-4 left-4 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full w-10 h-10 flex items-center justify-center shadow-md transition-all z-30">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </button>
            <!-- Show Panel Button -->
            <button id="showPanelButton"
                class="absolute top-4 left-16 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full w-10 h-10 flex items-center justify-center shadow-md transition-all z-30 cursor-pointer hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2">
                    </path>
                </svg>
            </button>
            <div class="sun" id="sun" style="opacity: 1; transform: scale(1.12);"></div>
            <!-- Stats Button -->
            <div onclick="openStatsModal()"
                class="absolute bottom-4 left-4 bg-white bg-opacity-90 hover:bg-opacity-100 py-2 px-4 rounded-lg shadow-md cursor-pointer transition-all z-30 flex gap-4">
                <div class="text-sm font-medium text-gray-700">
                    <span id="creature-count">Animals: 0</span>
                </div>
                <div class="text-sm font-medium text-gray-700">
                    <span id="plant-count">Plants: 0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Animal Modal -->
    <div id="animalModal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="animalTitle" class="text-2xl font-bold text-green-800">Rabbit</h3>
                    <button onclick="closeModal('animalModal')" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="animalContent" class="space-y-4">
                    <div class="flex justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide-rabbit">
                            <path d="M13 16a3 3 0 0 1 2.24 5"></path>
                            <path d="M18 12h.01"></path>
                            <path
                                d="M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3">
                            </path>
                            <path d="M20 8.54V4a2 2 0 1 0-4 0v3"></path>
                            <path d="M7.612 12.524a3 3 0 1 0-1.6 4.3"></path>
                        </svg>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                        <p class="text-sm">Small herbivorous mammal that feeds on grass and vegetation. Rabbits are
                            quick and agile, often seen hopping around the ecosystem.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">Diet</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Grass patches</li>
                                <li>Bush leaves</li>
                                <li>Small plants</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">Behavior</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Fast, erratic movement</li>
                                <li>Seeks vegetation</li>
                                <li>Weather sensitive</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <button onclick="selectAnimalForPlacement()"
                    class="mt-6 w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-all">
                    Place This Animal
                </button>
            </div>
        </div>
    </div>

    <!-- Plant Modal -->
    <div id="plantModal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="plantTitle" class="text-2xl font-bold text-green-800">Grass</h3>
                    <button onclick="closeModal('plantModal')" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="plantContent" class="space-y-4">
                    <div class="flex justify-center mb-4">
                        <svg fill="none" stroke="currentColor" stroke-width="2" version="1.1" id="Capa_1"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                            height="24px" viewBox="0 0 46.132 46.132" xml:space="preserve">
                            <g>
                                <g>
                                    <path
                                        d="M41.018,0.365c-0.238-0.342-0.688-0.461-1.064-0.282C35.202,2.349,28.245,7.011,23,16.148	c3.04,4.616,5.675,10.559,7.057,18.125c0.181-7.561,1.681-23.859,10.856-32.812C41.212,1.171,41.255,0.707,41.018,0.365z">
                                    </path>
                                    <path
                                        d="M9.673,6.905C9.531,6.811,9.369,6.766,9.207,6.766c-0.231,0-0.461,0.094-0.628,0.275c-0.282,0.307-0.3,0.773-0.044,1.101			c9.251,11.848,6.688,32.297,5.946,37.004c-0.039,0.247,0.031,0.498,0.193,0.688c0.162,0.188,0.399,0.299,0.648,0.299h11.908			c0.229,0,0.446-0.091,0.606-0.253s0.249-0.381,0.246-0.609C27.806,22.242,16.498,11.376,9.673,6.905z">
                                    </path>
                                    <path
                                        d="M2.464,27.554c-0.165-0.108-0.385-0.081-0.519,0.064c-0.134,0.146-0.143,0.366-0.021,0.522			c4.387,5.617,3.172,15.312,2.819,17.543C4.724,45.801,4.759,45.909,4.834,46c0.077,0.09,0.19,0.132,0.308,0.132h5.645			c0.107,0,0.211-0.034,0.287-0.11s0.118-0.176,0.117-0.284C11.061,34.82,5.701,29.674,2.464,27.554z">
                                    </path>
                                    <path
                                        d="M44.146,20.59c-0.186-0.201-0.486-0.239-0.716-0.089c-4.463,2.923-11.854,10.028-12.036,25.087			c-0.003,0.147,0.059,0.281,0.161,0.388c0.105,0.106,0.246,0.156,0.397,0.156h7.785c0.164,0,0.317-0.062,0.424-0.187			c0.104-0.124,0.15-0.282,0.126-0.443c-0.485-3.078-2.161-16.447,3.889-24.195C44.344,21.093,44.331,20.791,44.146,20.59z">
                                    </path>
                                </g>
                            </g>
                        </svg>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                        <p class="text-sm">Fast-growing ground cover that forms the base of many food chains. Grass is
                            essential for herbivorous animals.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">Growth Requirements</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Regular rainfall</li>
                                <li>Temperature 0-40&deg;C</li>
                                <li>Spreads naturally</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">Ecosystem Role</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Primary food source</li>
                                <li>Prevents soil erosion</li>
                                <li>Supports grazing animals</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <button onclick="selectPlantForPlacement()"
                    class="mt-6 w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-all">
                    Place This Plant
                </button>
            </div>
        </div>
    </div>

    <!-- Weather Modal -->
    <div id="weatherModal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-green-800">Weather System</h3>
                    <button onclick="closeModal('weatherModal')" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="weatherContent" class="space-y-4">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-700 mb-2">
                            Current Conditions
                        </h4>
                        <p>Temperature: <span id="modal-temp">20</span>&deg;C</p>
                        <p>Rainfall: <span id="modal-rain">0</span>%</p>
                        <p>Weather Type: <span id="weather-type">Sunny</span></p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">
                                Temperature Effects
                            </h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Cold (&lt;10&deg;C): Animals move slower</li>
                                <li>Hot (&gt;30&deg;C): Reduced plant growth</li>
                                <li>Optimal (15-25&deg;C): Balanced ecosystem</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">
                                Rainfall Effects
                            </h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Low (&lt;30%): Desert conditions</li>
                                <li>High (&gt;70%): Wetland environment</li>
                                <li>Heavy rain slows animal movement</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3 mt-6">
                    <button onclick="setStormWeather()"
                        class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-all">
                        Create Storm
                    </button>
                    <button onclick="setClearWeather()"
                        class="bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded-lg transition-all">
                        Clear Weather
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Terrain Modal -->
    <div id="terrainModal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="terrainTitle" class="text-2xl font-bold text-green-800">Wetland Terrain</h3>
                    <button onclick="closeModal('terrainModal')" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="terrainContent" class="space-y-4">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                        <p class="text-sm">Water-rich environment supporting aquatic and semi-aquatic species. Critical
                            habitat for many wildlife species.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">Best For</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Water-loving plants</li>
                                <li>Birds and amphibians</li>
                                <li>Unique ecosystems</li>
                            </ul>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-700 mb-2">Climate</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm">
                                <li>Very high rainfall</li>
                                <li>Consistent moisture</li>
                                <li>Stable temperatures</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <button onclick="selectTerrain()"
                    class="mt-6 w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-all">
                    Apply This Terrain
                </button>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="statsModal"
        class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-green-800">
                        Ecosystem Statistics
                    </h3>
                    <button onclick="closeModal('statsModal')" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-green-600" id="stat-animals">0</div>
                        <div class="text-sm text-gray-600">Total Animals</div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-green-600" id="stat-plants">0</div>
                        <div class="text-sm text-gray-600">Total Plants</div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-green-600" id="stat-biodiversity">0</div>
                        <div class="text-sm text-gray-600">Biodiversity Index</div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg text-center">
                        <div class="text-3xl font-bold text-green-600" id="stat-health">Poor</div>
                        <div class="text-sm text-gray-600">Ecosystem Health</div>
                    </div>
                </div>
                <div id="detailed-stats" class="space-y-4">
                    <div class="space-y-4"></div>
                </div>
                <div class="grid grid-cols-2 gap-3 mt-6">
                    <button onclick="clearEcosystem()"
                        class="bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-all">
                        Clear All
                    </button>
                    <button onclick="generateRandomEcosystem()"
                        class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg transition-all">
                        Random Ecosystem
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-green-800">
                        How to Use the Ecosystem Simulator
                    </h3>
                    <button onclick="closeModal('helpModal')" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-700 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                            Placing Elements
                        </h4>
                        <p class="text-sm">
                            Click on animals or plants in the control panel to select them,
                            then click anywhere in the ecosystem to place them.
                        </p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-700 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-sun-icon lucide-sun">
                                <circle cx="12" cy="12" r="4" />
                                <path d="M12 2v2" />
                                <path d="M12 20v2" />
                                <path d="m4.93 4.93 1.41 1.41" />
                                <path d="m17.66 17.66 1.41 1.41" />
                                <path d="M2 12h2" />
                                <path d="M20 12h2" />
                                <path d="m6.34 17.66-1.41 1.41" />
                                <path d="m19.07 4.93-1.41 1.41" />
                            </svg>
                            Weather Control
                        </h4>
                        <p class="text-sm">
                            Use the rainfall and temperature sliders to affect the
                            ecosystem. Weather influences animal behavior and plant growth.
                        </p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-700 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-mountain-snow-icon lucide-mountain-snow">
                                <path d="m8 3 4 8 5-5 5 15H2L8 3z" />
                                <path d="M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19" />
                            </svg>
                            Terrain Types
                        </h4>
                        <p class="text-sm">
                            Different terrains support different species. Switch between
                            grassland, desert, forest, and wetland environments.
                        </p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-700 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="lucide lucide-binoculars-icon lucide-binoculars">
                                <path d="M10 10h4" />
                                <path d="M19 7V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3" />
                                <path
                                    d="M20 21a2 2 0 0 0 2-2v-3.851c0-1.39-2-2.962-2-4.829V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2z" />
                                <path d="M 22 16 L 2 16" />
                                <path
                                    d="M4 21a2 2 0 0 1-2-2v-3.851c0-1.39 2-2.962 2-4.829V8a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2z" />
                                <path d="M9 7V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v3" />
                            </svg>
                            Monitoring
                        </h4>
                        <p class="text-sm">
                            Click the statistics display to view detailed ecosystem health
                            metrics and biodiversity information.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class EcosystemSimulator {
            constructor() {
                this.ecosystem = document.getElementById("ecosystem");
                this.selectedItem = null;
                this.creatures = [];
                this.plants = [];
                this.currentTerrain = "grass";
                this.weather = { rain: 0, temperature: 20 };
                this.vegetationDensity = 50;
                this.currentAnimal = null;
                this.currentPlant = null;
                this.currentTerrainModal = null;
                this.rainInterval = null;
                this.lastRainDropTime = 0;
                this.rainDropDelay = 0;

                this.init();
            }

            init() {
                this.setupEventListeners();
                this.startSimulation();
                this.updateStats();
            }

            setupEventListeners() {
                document.querySelectorAll(".creature-btn").forEach((btn) => {
                    btn.addEventListener("click", (e) => {
                        if (!e.target.dataset.type) return;
                        document
                            .querySelectorAll(".creature-btn, .plant-btn")
                            .forEach((b) => b.classList.remove("selected"));
                        e.target.classList.add("selected");
                        this.selectedItem = {
                            type: "creature",
                            subtype: e.target.dataset.type,
                        };
                    });
                });

                document.querySelectorAll(".plant-btn").forEach((btn) => {
                    btn.addEventListener("click", (e) => {
                        if (!e.target.dataset.type) return;
                        document
                            .querySelectorAll(".creature-btn, .plant-btn")
                            .forEach((b) => b.classList.remove("selected"));
                        e.target.classList.add("selected");
                        this.selectedItem = {
                            type: "plant",
                            subtype: e.target.dataset.type,
                        };
                    });
                });

                this.ecosystem.addEventListener("click", (e) => {
                    if (this.selectedItem && e.target === this.ecosystem) {
                        const rect = this.ecosystem.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;

                        if (this.selectedItem.type === "creature") {
                            this.addCreature(this.selectedItem.subtype, x, y);
                        } else if (this.selectedItem.type === "plant") {
                            this.addPlant(this.selectedItem.subtype, x, y);
                        }
                    }
                });

                document
                    .getElementById("rain-slider")
                    .addEventListener("input", (e) => {
                        this.weather.rain = parseInt(e.target.value);
                        document.getElementById("rain-value").textContent =
                            this.weather.rain;
                        this.updateWeather();
                        this.updateModalWeather();

                        // Update rain drop delay based on intensity (0-100 maps to 1000ms-50ms)
                        this.rainDropDelay = 25 - (this.weather.rain * 0.25);
                        if (this.rainDropDelay < 5) this.rainDropDelay = 5;
                    });

                document
                    .getElementById("temp-slider")
                    .addEventListener("input", (e) => {
                        this.weather.temperature = parseInt(e.target.value);
                        document.getElementById("temp-value").textContent =
                            this.weather.temperature;
                        this.updateWeather();
                        this.updateModalWeather();
                    });

                document
                    .getElementById("vegetation-slider")
                    .addEventListener("input", (e) => {
                        this.vegetationDensity = parseInt(e.target.value);
                        document.getElementById("vegetation-value").textContent =
                            this.vegetationDensity;
                        this.updateVegetation();
                    });

            }

            addCreature(type, x, y) {
                const creature = document.createElement("div");
                creature.className = `creature ${type}`;
                creature.style.left = `${x - 20}px`;
                creature.style.top = `${y - 20}px`;

                const img = document.createElement("div");
                img.innerHTML = this.getCreatureSVG(type);
                img.className = "animal-icon";
                creature.appendChild(img);

                const creatureData = {
                    element: creature,
                    type: type,
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    energy: 100,
                    age: 0,
                };

                this.creatures.push(creatureData);
                this.ecosystem.appendChild(creature);
                this.updateCounts();

                creature.addEventListener("click", (e) => {
                    e.stopPropagation();
                    this.removeCreature(creatureData);
                });
            }

            addPlant(type, x, y) {
                const plant = document.createElement("div");
                plant.className = `plant ${type}`;
                plant.style.left = `${x - 20}px`;
                plant.style.top = `${y - 20}px`;

                const img = document.createElement("div");
                img.innerHTML = this.getPlantSVG(type);
                img.className = "plant-icon";
                plant.appendChild(img);

                const plantData = {
                    element: plant,
                    type: type,
                    x: x,
                    y: y,
                    growth: 100,
                    age: 0,
                };

                this.plants.push(plantData);
                this.ecosystem.appendChild(plant);
                this.updateCounts();

                plant.addEventListener("click", (e) => {
                    e.stopPropagation();
                    this.removePlant(plantData);
                });
            }

            getCreatureSVG(type) {
                const svgs = {
                    rabbit:
                        '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-rabbit"><path d="M13 16a3 3 0 0 1 2.24 5"/><path d="M18 12h.01"/><path d="M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3"/><path d="M20 8.54V4a2 2 0 1 0-4 0v3"/><path d="M7.612 12.524a3 3 0 1 0-1.6 4.3"/></svg>',
                    bird: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-bird"><path d="M16 7h.01"/><path d="M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20"/><path d="m20 7 2 .5-2 .5"/><path d="M10 18v3"/><path d="M14 17.75V21"/><path d="M7 18a6 6 0 0 0 3.84-10.61"/></svg>',
                    deer: '<svg width="48px" height="48px" viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M103.157 228.16C97.1175 206.603 77.6664 197.936 88.6369 175.668C97.1175 158.454 216.768 173.72 223.31 167.358C227.108 163.666 253.471 121.867 258.205 119.564C262.157 117.642 275.672 120.91 294.804 125.866C299.384 127.052 319.504 129.075 323.313 132.708C328.048 137.225 321.653 161.99 319.828 163.949C317.256 166.71 284.523 158.038 279.579 161.059C271.931 165.731 249.143 243.322 246.413 245.711C236.031 254.794 137.578 245.883 121.106 243.322" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M119.324 245.155C111.82 253.018 97.8435 278.228 97.8435 282.955C97.8435 289.231 95.8876 318.675 108.246 329.255" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M135.233 251.974C130.443 265.952 127.324 281.559 121.596 294.024" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M121.596 297.433C127.911 310.597 128.475 326.336 142.052 330.391" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M224.173 253.11C221.814 278.703 222.559 305.39 222.559 330.391" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M247.051 249.701C249.824 271.765 240.895 315.752 248.882 329.255" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M195.467 75.8188C214.423 101.322 304.859 98.2276 314.977 98.2276" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M284.527 69.3765C283.651 74.4106 282.19 79.2537 281.039 84.2196C280.985 84.4563 276.047 97.6607 276.16 97.7654C276.8 98.3572 290.341 87.3921 291.497 86.8004C292.382 86.3407 307.167 79.6679 306.838 79.0579" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M253.428 75.1348C245.401 105.485 235.172 68.9216 234.936 69.0001C224.336 72.4118 228.894 94.9351 219.334 69.559" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/><path d="M86.3648 176.966C83.4788 182.407 78.9329 187.315 75 191.74" stroke="#000000" stroke-opacity="0.9" stroke-width="16" stroke-linecap="round" stroke-linejoin="round"/></svg>',
                    fox: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-cat"><path d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"/><path d="M8 14v.5"/><path d="M16 14v.5"/><path d="M11.25 16.25h1.5L12 17l-.75-.75Z"/></svg>',
                };
                return svgs[type];
            }

            getPlantSVG(type) {
                const svgs = {
                    tree: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-tree-pine"><path d="m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"/><path d="M12 22v-3"/></svg>',
                    bush: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shrub-icon lucide-shrub"><path d="M12 22v-7l-2-2"/><path d="M17 8v.8A6 6 0 0 1 13.8 20H10A6.5 6.5 0 0 1 7 8a5 5 0 0 1 10 0Z"/><path d="m14 14-2 2"/></svg>',
                    grass:
                        '<svg fill="none" stroke="currentColor" stroke-width="2" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 46.132 46.132" xml:space="preserve"><g><g><path d="M41.018,0.365c-0.238-0.342-0.688-0.461-1.064-0.282C35.202,2.349,28.245,7.011,23,16.148	c3.04,4.616,5.675,10.559,7.057,18.125c0.181-7.561,1.681-23.859,10.856-32.812C41.212,1.171,41.255,0.707,41.018,0.365z"/>	<path d="M9.673,6.905C9.531,6.811,9.369,6.766,9.207,6.766c-0.231,0-0.461,0.094-0.628,0.275c-0.282,0.307-0.3,0.773-0.044,1.101			c9.251,11.848,6.688,32.297,5.946,37.004c-0.039,0.247,0.031,0.498,0.193,0.688c0.162,0.188,0.399,0.299,0.648,0.299h11.908			c0.229,0,0.446-0.091,0.606-0.253s0.249-0.381,0.246-0.609C27.806,22.242,16.498,11.376,9.673,6.905z"/>		<path d="M2.464,27.554c-0.165-0.108-0.385-0.081-0.519,0.064c-0.134,0.146-0.143,0.366-0.021,0.522			c4.387,5.617,3.172,15.312,2.819,17.543C4.724,45.801,4.759,45.909,4.834,46c0.077,0.09,0.19,0.132,0.308,0.132h5.645			c0.107,0,0.211-0.034,0.287-0.11s0.118-0.176,0.117-0.284C11.061,34.82,5.701,29.674,2.464,27.554z"/>		<path d="M44.146,20.59c-0.186-0.201-0.486-0.239-0.716-0.089c-4.463,2.923-11.854,10.028-12.036,25.087			c-0.003,0.147,0.059,0.281,0.161,0.388c0.105,0.106,0.246,0.156,0.397,0.156h7.785c0.164,0,0.317-0.062,0.424-0.187			c0.104-0.124,0.15-0.282,0.126-0.443c-0.485-3.078-2.161-16.447,3.889-24.195C44.344,21.093,44.331,20.791,44.146,20.59z"/>	</g></g></svg>',
                };
                return svgs[type];
            }

            removeCreature(creature) {
                const index = this.creatures.indexOf(creature);
                if (index > -1) {
                    this.creatures.splice(index, 1);
                    creature.element.remove();
                    this.updateCounts();
                }
            }

            removePlant(plant) {
                const index = this.plants.indexOf(plant);
                if (index > -1) {
                    this.plants.splice(index, 1);
                    plant.element.remove();
                    this.updateCounts();
                }
            }

            updateCounts() {
                document.getElementById("creature-count").textContent =
                    `Animals: ${this.creatures.length}`;
                document.getElementById("plant-count").textContent =
                    `Plants: ${this.plants.length}`;
                this.updateStats();
            }

            updateStats() {
                const statAnimals = document.getElementById("stat-animals");
                const statPlants = document.getElementById("stat-plants");
                const statBiodiversity = document.getElementById("stat-biodiversity");
                const statHealth = document.getElementById("stat-health");

                if (statAnimals) statAnimals.textContent = this.creatures.length;
                if (statPlants) statPlants.textContent = this.plants.length;

                const animalTypes = new Set(this.creatures.map((c) => c.type));
                const plantTypes = new Set(this.plants.map((p) => p.type));
                const biodiversity = animalTypes.size + plantTypes.size;
                if (statBiodiversity) statBiodiversity.textContent = biodiversity;

                let health = "Poor";
                const total = this.creatures.length + this.plants.length;
                if (total > 20 && biodiversity > 4) health = "Excellent";
                else if (total > 10 && biodiversity > 2) health = "Good";
                else if (total > 5) health = "Fair";
                if (statHealth) statHealth.textContent = health;

                const detailedStats = document.getElementById("detailed-stats");
                if (detailedStats) {
                    const animalCounts = {};
                    const plantCounts = {};

                    this.creatures.forEach((c) => {
                        animalCounts[c.type] = (animalCounts[c.type] || 0) + 1;
                    });

                    this.plants.forEach((p) => {
                        plantCounts[p.type] = (plantCounts[p.type] || 0) + 1;
                    });

                    let html = '<div class="space-y-4">';
                    if (Object.keys(animalCounts).length > 0) {
                        html +=
                            '<div class="bg-green-50 p-4 rounded-lg"><h4 class="font-semibold text-green-700 mb-2">Animal Populations</h4><div class="grid grid-cols-2 gap-2">';
                        Object.entries(animalCounts).forEach(([type, count]) => {
                            html += `<div class="flex items-center gap-2"><div class="w-6 h-6">${this.getCreatureSVG(type)}</div> <span class="text-sm">${type.charAt(0).toUpperCase() + type.slice(1)}: ${count}</span></div>`;
                        });
                        html += "</div></div>";
                    }

                    if (Object.keys(plantCounts).length > 0) {
                        html +=
                            '<div class="bg-green-50 p-4 rounded-lg"><h4 class="font-semibold text-green-700 mb-2">Plant Populations</h4><div class="grid grid-cols-2 gap-2">';
                        Object.entries(plantCounts).forEach(([type, count]) => {
                            html += `<div class="flex items-center gap-2"><div class="w-6 h-6">${this.getPlantSVG(type)}</div> <span class="text-sm">${type.charAt(0).toUpperCase() + type.slice(1)}: ${count}</span></div>`;
                        });
                        html += "</div></div>";
                    }
                    html += "</div>";

                    detailedStats.innerHTML = html;
                }
            }

            changeTerrain(terrain) {
                this.ecosystem.className = `ecosystem-view terrain-${terrain} rounded-xl shadow-lg flex-1 relative overflow-hidden`;
                this.currentTerrain = terrain;
            }

            updateWeather() {
                // Clear existing rain
                document
                    .querySelectorAll(".rain-drop")
                    .forEach((drop) => drop.remove());
                clearInterval(this.rainInterval);

                const sun = document.getElementById("sun");
                const brightness =
                    this.weather.temperature > 25 ? 1 : this.weather.temperature / 25;
                sun.style.opacity = 1 - this.weather.rain / 100;
                sun.style.transform = `scale(${0.8 + brightness * 0.4})`;

                // Update rain drop delay - linear scale from 0ms (at 0%) to 25ms (at 100%)
                this.rainDropDelay = 25 - (this.weather.rain * 0.25);
                if (this.rainDropDelay < 5) this.rainDropDelay = 5;

                // Start rain if needed
                if (this.weather.rain > 0) {
                    this.lastRainDropTime = 0;
                    this.rainInterval = setInterval(() => this.createRainDrops(), 16); // ~60fps
                }
            }

            createRainDrops() {
                const now = Date.now();
                if (now - this.lastRainDropTime > this.rainDropDelay) {
                    this.lastRainDropTime = now;

                    // Create drops based on rain intensity (1 at 0%, scaling up to 10 at 100%)
                    const dropCount = Math.max(1, Math.floor(this.weather.rain / 10));

                    for (let i = 0; i < dropCount; i++) {
                        const drop = document.createElement('div');
                        drop.className = 'rain-drop';
                        drop.style.left = `${Math.random() * 100}%`;
                        drop.style.top = '0';

                        // Add slight randomness to the animation duration and direction
                        const duration = (0.25 + Math.random() * 0.25);
                        drop.style.animationDuration = `${duration}s`;

                        // Add slight horizontal movement (random between 30-70px to keep it uniform)
                        const horizontalMovement = 50 + (Math.random() * 20 - 10);
                        drop.style.setProperty('--rain-x', `${horizontalMovement}px`);

                        this.ecosystem.appendChild(drop);

                        // Remove drop after animation completes
                        setTimeout(() => drop.remove(), duration * 1000);
                    }
                }
            }

            updateModalWeather() {
                const modalTemp = document.getElementById("modal-temp");
                const modalRain = document.getElementById("modal-rain");
                const weatherType = document.getElementById("weather-type");

                if (modalTemp) modalTemp.textContent = this.weather.temperature;
                if (modalRain) modalRain.textContent = this.weather.rain;

                if (weatherType) {
                    let type = "Sunny";
                    if (this.weather.rain > 70) type = "Heavy Rain";
                    else if (this.weather.rain > 40) type = "Rainy";
                    else if (this.weather.rain > 10) type = "Cloudy";
                    else if (this.weather.temperature > 30) type = "Hot";
                    else if (this.weather.temperature < 5) type = "Cold";
                    weatherType.textContent = type;
                }
            }

            updateVegetation() {
                this.plants.forEach((plant) => {
                    plant.growth = Math.min(
                        100,
                        plant.growth + (this.vegetationDensity - 50) / 10,
                    );
                    const scale = 0.5 + (plant.growth / 100) * 0.5;
                    plant.element.style.transform = `scale(${scale})`;
                });
            }

            moveCreatures() {
                const bounds = this.ecosystem.getBoundingClientRect();

                this.creatures.forEach((creature) => {
                    creature.x += creature.vx;
                    creature.y += creature.vy;
                    creature.age += 0.01;

                    if (creature.x <= 20 || creature.x >= bounds.width - 20) {
                        creature.vx = -creature.vx;
                    }
                    if (creature.y <= 20 || creature.y >= bounds.height - 20) {
                        creature.vy = -creature.vy;
                    }

                    if (Math.random() < 0.02) {
                        creature.vx = (Math.random() - 0.5) * 2;
                        creature.vy = (Math.random() - 0.5) * 2;
                    }

                    if (this.weather.rain > 50) {
                        creature.vx *= 0.8;
                        creature.vy *= 0.8;
                    }

                    if (
                        creature.type === "bird" &&
                        this.weather.temperature > 20 &&
                        this.weather.rain < 30
                    ) {
                        creature.vy -= 0.1;
                    }

                    creature.element.style.left = `${creature.x - 20}px`;
                    creature.element.style.top = `${creature.y - 20}px`;

                    if (creature.type === "rabbit" || creature.type === "deer") {
                        this.plants.forEach((plant) => {
                            const distance = Math.sqrt(
                                Math.pow(creature.x - plant.x, 2) +
                                Math.pow(creature.y - plant.y, 2),
                            );
                            if (distance < 30 && plant.growth > 20) {
                                plant.growth -= 0.5;
                                creature.energy = Math.min(100, creature.energy + 0.2);
                            }
                        });
                    }
                });
            }

            startSimulation() {
                setInterval(() => {
                    this.moveCreatures();
                    this.updateStats();
                }, 50);
            }
        }

        let simulator;

        function openAnimalModal(type) {
            simulator.currentAnimal = type;
            const modal = document.getElementById("animalModal");
            const title = document.getElementById("animalTitle");
            const content = document.getElementById("animalContent");

            const animalInfo = {
                rabbit: {
                    title: "Rabbit",
                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getCreatureSVG("rabbit")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Small herbivorous mammal that feeds on grass and vegetation. Rabbits are quick and agile, often seen hopping around the ecosystem.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Diet</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Grass patches</li>
                                            <li>Bush leaves</li>
                                            <li>Small plants</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Behavior</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Fast, erratic movement</li>
                                            <li>Seeks vegetation</li>
                                            <li>Weather sensitive</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                bird: {
                    title: "Bird",
                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getCreatureSVG("bird")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Aerial species that flies throughout the ecosystem. Birds are affected by weather conditions and prefer clear skies.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Diet</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Seeds from plants</li>
                                            <li>Small insects</li>
                                            <li>Tree fruits</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Behavior</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Flies higher in good weather</li>
                                            <li>Avoids heavy rain</li>
                                            <li>Migrates with temperature</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                deer: {
                    title: "Deer",
                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getCreatureSVG("deer")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Large herbivorous mammal that grazes on various vegetation. Deer are gentle creatures that roam slowly through the ecosystem.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Diet</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Tree leaves</li>
                                            <li>Grass and shrubs</li>
                                            <li>Bushes and saplings</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Behavior</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Slow, graceful movement</li>
                                            <li>Prefers forested areas</li>
                                            <li>Social grazing patterns</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },

                fox: {
                    title: "Fox",
                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getCreatureSVG("fox")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Cunning predator that hunts smaller animals. Foxes are adaptable and can thrive in various terrain types.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Diet</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Small mammals (rabbits)</li>
                                            <li>Birds and eggs</li>
                                            <li>Occasional vegetation</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Behavior</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Stealthy hunting</li>
                                            <li>Territorial movement</li>
                                            <li>Weather adaptable</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
            };

            title.textContent = animalInfo[type].title;
            content.innerHTML = animalInfo[type].content;
            modal.classList.remove("hidden");
        }

        function openPlantModal(type) {
            simulator.currentPlant = type;
            const modal = document.getElementById("plantModal");
            const title = document.getElementById("plantTitle");
            const content = document.getElementById("plantContent");

            const plantInfo = {
                tree: {
                    title: "Tree",
                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getPlantSVG("tree")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Large woody plant that provides shade and food. Trees are the foundation of forest ecosystems and support many animal species.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Growth Requirements</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Moderate to high rainfall</li>
                                            <li>Temperature 10-30&deg;C</li>
                                            <li>Good soil conditions</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Ecosystem Role</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Provides shelter</li>
                                            <li>Produces oxygen</li>
                                            <li>Food source for herbivores</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                bush: {
                    title: "Bush",
                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getPlantSVG("bush")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Medium-sized shrub that grows quickly and provides cover. Bushes are hardy plants that can survive in various conditions.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Growth Requirements</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Low to moderate water</li>
                                            <li>Temperature 5-35&deg;C</li>
                                            <li>Adaptable to most soils</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Ecosystem Role</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Quick ground cover</li>
                                            <li>Nesting sites for birds</li>
                                            <li>Food for small mammals</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                grass: {
                    title: "Grass",

                    content: `
                                <div class="flex justify-center mb-4">
                                    ${simulator.getPlantSVG("grass")}
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Fast-growing ground cover that forms the base of many food chains. Grass is essential for herbivorous animals.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Growth Requirements</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Regular rainfall</li>
                                            <li>Temperature 0-40&deg;C</li>
                                            <li>Spreads naturally</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Ecosystem Role</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Primary food source</li>
                                            <li>Prevents soil erosion</li>
                                            <li>Supports grazing animals</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
            };

            title.textContent = plantInfo[type].title;
            content.innerHTML = plantInfo[type].content;
            modal.classList.remove("hidden");
        }

        function openWeatherModal() {
            const modal = document.getElementById("weatherModal");
            simulator.updateModalWeather();
            modal.classList.remove("hidden");
        }

        function openTerrainModal(terrain) {
            originalTerrain = simulator.currentTerrain;
            simulator.currentTerrainModal = terrain;
            const modal = document.getElementById("terrainModal");
            const title = document.getElementById("terrainTitle");
            const content = document.getElementById("terrainContent");

            const terrainInfo = {
                grass: {
                    title: "Grassland Terrain",
                    content: `
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Open grassland with scattered vegetation. Ideal for grazing animals and supports diverse wildlife populations.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Best For</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Rabbits and deer</li>
                                            <li>Grass and bush growth</li>
                                            <li>Balanced ecosystems</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Climate</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Moderate rainfall needed</li>
                                            <li>Temperature: 10-25&deg;C</li>
                                            <li>Seasonal variations</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                desert: {
                    title: "Desert Terrain",
                    content: `
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Arid environment with sparse vegetation. Only the most adaptable species can survive in these harsh conditions.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Best For</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Hardy shrubs</li>
                                            <li>Desert-adapted animals</li>
                                            <li>Specialized ecosystems</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Climate</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Very low rainfall</li>
                                            <li>High temperatures</li>
                                            <li>Extreme conditions</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                forest: {
                    title: "Forest Terrain",
                    content: `
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Dense woodland environment rich in biodiversity. Supports complex food webs and numerous species interactions.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Best For</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Trees and large plants</li>
                                            <li>Deer and forest animals</li>
                                            <li>High biodiversity</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Climate</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>High rainfall</li>
                                            <li>Moderate temperatures</li>
                                            <li>Humid conditions</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
                water: {
                    title: "Wetland Terrain",
                    content: `
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-semibold text-green-700 mb-2">Characteristics</h4>
                                    <p class="text-sm">Water-rich environment supporting aquatic and semi-aquatic species. Critical habitat for many wildlife species.</p>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Best For</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Water-loving plants</li>
                                            <li>Birds and amphibians</li>
                                            <li>Unique ecosystems</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-semibold text-blue-700 mb-2">Climate</h4>
                                        <ul class="list-disc list-inside space-y-1 text-sm">
                                            <li>Very high rainfall</li>
                                            <li>Consistent moisture</li>
                                            <li>Stable temperatures</li>
                                        </ul>
                                    </div>
                                </div>
                            `,
                },
            };

            title.textContent = terrainInfo[terrain].title;
            content.innerHTML = terrainInfo[terrain].content;
            modal.classList.remove("hidden");
        }

        function openStatsModal() {
            const modal = document.getElementById("statsModal");
            simulator.updateStats();
            modal.classList.remove("hidden");
        }

        function openHelpModal() {
            const modal = document.getElementById("helpModal");
            modal.classList.remove("hidden");
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add("hidden");
            if (modalId == "terrainModal" && originalTerrain) {
                simulator.changeTerrain(originalTerrain);
                originalTerrain = null;
            }
        }

        function selectAnimalForPlacement() {
            if (simulator.currentAnimal) {
                document
                    .querySelectorAll(".creature-btn, .plant-btn")
                    .forEach((b) => b.classList.remove("selected"));
                document
                    .querySelector(`[data-type="${simulator.currentAnimal}"]`)
                    .classList.add("selected");
                simulator.selectedItem = {
                    type: "creature",
                    subtype: simulator.currentAnimal,
                };
                closeModal("animalModal");
            }
        }

        function selectPlantForPlacement() {
            if (simulator.currentPlant) {
                document
                    .querySelectorAll(".creature-btn, .plant-btn")
                    .forEach((b) => b.classList.remove("selected"));
                document
                    .querySelector(`[data-type="${simulator.currentPlant}"]`)
                    .classList.add("selected");
                simulator.selectedItem = {
                    type: "plant",
                    subtype: simulator.currentPlant,
                };
                closeModal("plantModal");
            }
        }

        function selectTerrain() {
            if (simulator.currentTerrainModal) {
                document
                    .querySelectorAll(".terrain-btn")
                    .forEach((b) => b.classList.remove("active"));
                document
                    .querySelector(`[data-terrain="${simulator.currentTerrainModal}"]`)
                    .classList.add("active");
                simulator.changeTerrain(simulator.currentTerrainModal);
                originalTerrain = null;
                closeModal("terrainModal");
            }
        }

        function setRandomWeather() {
            const rain = Math.floor(Math.random() * 100);
            const temp = Math.floor(Math.random() * 50) - 10;

            document.getElementById("rain-slider").value = rain;
            document.getElementById("temp-slider").value = temp;

            simulator.weather.rain = rain;
            simulator.weather.temperature = temp;

            document.getElementById("rain-value").textContent = rain;
            document.getElementById("temp-value").textContent = temp;

            simulator.updateWeather();
            simulator.updateModalWeather();
        }

        function setStormWeather() {
            document.getElementById("rain-slider").value = 90;
            document.getElementById("temp-slider").value = 15;

            simulator.weather.rain = 90;
            simulator.weather.temperature = 15;

            document.getElementById("rain-value").textContent = "90";
            document.getElementById("temp-value").textContent = "15";

            simulator.updateWeather();
            simulator.updateModalWeather();
        }

        function setClearWeather() {
            document.getElementById("rain-slider").value = 0;
            document.getElementById("temp-slider").value = 25;

            simulator.weather.rain = 0;
            simulator.weather.temperature = 25;

            document.getElementById("rain-value").textContent = "0";
            document.getElementById("temp-value").textContent = "25";

            simulator.updateWeather();
            simulator.updateModalWeather();
        }

        function clearEcosystem() {
            if (confirm("Are you sure you want to clear all animals and plants?")) {
                simulator.creatures.forEach((creature) => creature.element.remove());
                simulator.plants.forEach((plant) => plant.element.remove());
                simulator.creatures = [];
                simulator.plants = [];
                simulator.updateCounts();
                closeModal("statsModal");
            }
        }

        function generateRandomEcosystem() {
            clearEcosystem();

            const animalTypes = ["rabbit", "bird", "deer", "fox"];
            const plantTypes = ["tree", "bush", "grass"];
            const bounds = simulator.ecosystem.getBoundingClientRect();

            for (let i = 0; i < 15; i++) {
                const type =
                    plantTypes[Math.floor(Math.random() * plantTypes.length)];
                const x = Math.random() * (bounds.width - 100) + 50;
                const y = Math.random() * (bounds.height - 100) + 50;
                simulator.addPlant(type, x, y);
            }

            for (let i = 0; i < 10; i++) {
                const type =
                    animalTypes[Math.floor(Math.random() * animalTypes.length)];
                const x = Math.random() * (bounds.width - 100) + 50;
                const y = Math.random() * (bounds.height - 100) + 50;
                simulator.addCreature(type, x, y);
            }

            closeModal("statsModal");
        }

        window.onclick = function (event) {
            const modals = document.querySelectorAll(".modal");
            modals.forEach((modal) => {
                if (event.target === modal) {
                    modal.classList.add("hidden");
                }
            });
        };

        document.addEventListener("DOMContentLoaded", () => {
            simulator = new EcosystemSimulator();
        });

        document.addEventListener("DOMContentLoaded", function () {
            const panelToggle = document.getElementById("panelToggle");
            const controlPanel = panelToggle.parentElement;
            const showPanelButton = document.getElementById("showPanelButton");
            let isOpen = true;

            function updatePanelState(open) {
                isOpen = open;
                if (isOpen) {
                    controlPanel.classList.remove("hidden");
                    panelToggle.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        `;
                    showPanelButton.classList.add("hidden");
                } else {
                    controlPanel.classList.add("hidden");
                    panelToggle.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
            </svg>
        `;
                    showPanelButton.classList.remove("hidden");
                }
            }

            panelToggle.addEventListener("click", function () {
                updatePanelState(!isOpen);
            });

            showPanelButton.addEventListener("click", function () {
                updatePanelState(true);
            });

            showPanelButton.classList.add("hidden");
        });

        function showView(view) {
            const landingView = document.getElementById("landing-view");
            const contentView = document.getElementById("content-view");
            const homeLink = document.getElementById("home-link");

            if (view === "landing") {
                landingView.classList.remove("hidden");
                contentView.classList.add("hidden");
                homeLink.classList.add("hidden");
            } else if (view === "content") {
                landingView.classList.add("hidden");
                contentView.classList.remove("hidden");
                homeLink.classList.remove("hidden");
            }
        }

        // Initialize with landing view
        showView("landing");
    </script>
    <!-- Footer -->
    <footer class="bg-green-800 text-white p-4 text-center">
        <p id="footer-text">
            © 2025 Wildlife Reserve Simulator | All rights reserved
        </p>
    </footer>


    <script type="text/javascript">
        (function () {

        })();
    </script>


</body>

</html>